# Приложение для работы с вакансиями из базы данных

Для работы приложения необходимо:
1) установить зависимости из requirements.txt:

```
pip install -r /path/to/requirements.txt
```
2) Записать пароль для доступа к базе данных в env-файл. Файл .env.sample находится в корневом каталоге 

Список компаний содержится в папке data в файле employers.json
```
{"cbs_commodities_management" :"1162986",
"encore" : "5344909",
"gts" : "2029899",
"happy_delivery" : "11071056",
"happy_phone" : "3786114",
"koblik_group" : "40951",
"ozon" : "10690081",
"retail_personal" : "1420859",
"rubin_aero_corp" : "1035262",
"abc_electro" : "129348",
"agat_utility" :  "168386",
"al_5" : "57302",
"gijov_galary" : "25331",
"bel_gran" : "602244",
"benuk_se" : "10911906"}
```

## Модуль main

Модуль взаимодействия с пользователем.
При запуске запрашивает у пользователя действия:
```
Добро пожаловать в программу обработки вакансий
Какие операции выполнить?
1 - Создание таблиц в базе данный
2 - Работа с существующими таблицами
```
При первом запуске приложения необходимо ввести 1 для создания базы данный с вакансиями и внесения данных с HH.ru

Для работы с существующей базой данных вводим 2, получаем сообщение от приложения:
```
Какие операции выполнить? 
1 - Получить список всех компаний и количество вакансий в компаниях 
2 - Получить список всех вакансий с указанием названия компании,названия вакансии, зарплаты и ссылки на вакансию
3 - Получить среднюю зарплату по вакансиям
4 - Получить список всех вакансий, у которых зарплата выше средней по всем вакансиям
5 - Найти вакансию по ключевому слову
```
После выбора получаем вывод в консоль список с результатом (пример: Просим получить список всех компаний и количество вакансий в компаниях):
```
[('CBS Commodities Management, LLC', 86),
 ('АВС-электро', 100), 
 ('Encore', 75), 
 ('АЛ5', 69), 
 ('KOBLiK GROUP', 80), 
 ('Happy Phone', 100), 
 ('Ozon (ИП Шевченко Игорь Вадимович)', 100), 
 ('Бенюк Светлана Эдуардовна', 100), 
 ('АГАТ, Управляющая компания', 100), 
 ('Ассоциация Галерея Чижова', 75), 
 ('Happy Delivery', 100), 
 ('Белгранкорм (Ясные Зори)', 100), 
 ('GTS', 100), 
 ('Авиационная корпорация Рубин', 95), 
 ('Retail Personal', 100)]
 ```
## Модуль vacancy_processing
Содержит класс HeadHunterVacancy, который получает с HH.ru данные и работодателе и открытых вакансиях

- Класс HeadHunterVacancy имеет следующие методы:
1) __api_request - защищенный метод для подключения к hh.ru
2) __get_vacancies - защищенный метод для получения списка вакансий работодателя
3) __get_employer - защищенный метод для получения данных о работодателе 
3) vacancy_list(self) - метод для формирования списка вакансий с Названием Вакансии, Минимальной зарплатой, Описанием требований к соискателю, Ссылкой на вакансию на HH.ru и графиком работы
4) employer_info - метод для формирования данных о работодателе

## Модуль database_create

Содержит функции:
- create_database для создания базы данных vacancies
- create_tables для создания таблиц vacancies и employers в базе данный vacancies
- table_insert_value для заполнения таблиц данными. В качестве аргумента принимает экземпляр класс HeadHunterVacancy

## Модуль database_access

Содержит класс DBManager. Имеет следующие методы:
1) get_companies_and_vacancies_count - метод получает из базы данных работодателей и число открытых вакансий
2) get_all_vacancies - метод получает все вакансии из базы данных
3) get_avg_salary - метод получает среднюю зарплату по вакансиям из базы данных
4) get_vacancies_with_higher_salary - метод получает все вакансии с зарплатой, выше средней
5) get_vacancies_whit_keyword(key_word) - метод получает вакансии с ключевым словом в названии. В качестве аргумента принимает ключевое слово от пользователя

## Модуль support_func 

Содержит вспомогательные функции для взаимодействия с пользователем:

- user_operation - функция выясняет у пользователя необходимость создания таблиц в базе данных
- user_interaction - функция запрашивает у пользователя, какие операции выполнить с вакансиями из файла
- user_database_interaction - функция выполняет обработку вакансий из базы данных

